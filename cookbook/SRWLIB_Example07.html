

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SRW Example #7 &mdash; srwpy 0.0.4a3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script >var copybuttonSkipText = '>>> ';</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SRW Example #9" href="SRWLIB_Example09.html" />
    <link rel="prev" title="SRW Example #6" href="SRWLIB_Example06.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> srwpy
          

          
          </a>

          
            
            
              <div class="version">
                0.0.4a3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Cookbook (Examples)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example01.html">SRW Example #1</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example01_kick_matr.html">SRW Example #1 (kick matrix)</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example02.html">SRW Example #2</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example03.html">SRW Example #3</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example04.html">SRW Example #4</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example05.html">SRW Example #5</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example06.html">SRW Example #6</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SRW Example #7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem">Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-solution">Example Solution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example09.html">SRW Example #9</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example13.html">SRW Example #13</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example14.html">SRW Example #14</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example15.html">SRW Example #15</a></li>
<li class="toctree-l2"><a class="reference internal" href="SRWLIB_Example16.html">SRW Example #16</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-history.html">Release History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">srwpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Cookbook (Examples)</a> &raquo;</li>
        
      <li>SRW Example #7</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/cookbook/SRWLIB_Example07.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-cookbook-srwlib-example07-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="srw-example-7">
<span id="sphx-glr-cookbook-srwlib-example07-py"></span><h1>SRW Example #7<a class="headerlink" href="#srw-example-7" title="Permalink to this headline">¶</a></h1>
<div class="section" id="problem">
<h2>Problem<a class="headerlink" href="#problem" title="Permalink to this headline">¶</a></h2>
<p>Simulating propagation of a Gaussian X-ray beam through a simple optical scheme
containing CRL</p>
</div>
<div class="section" id="example-solution">
<h2>Example Solution<a class="headerlink" href="#example-solution" title="Permalink to this headline">¶</a></h2>
<ul class="sphx-glr-horizontal">
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_001.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_001.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_002.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_002.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_003.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_003.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_004.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_004.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_005.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_005.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_006.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_006.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_007.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_007.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_008.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_008.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_009.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_009.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_010.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_010.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_011.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_011.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_012.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_012.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_013.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_013.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_014.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_014.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_015.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_015.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_016.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_016.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_017.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_017.png" />
</li>
<li><img alt="../_images/sphx_glr_SRWLIB_Example07_018.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_SRWLIB_Example07_018.png" />
</li>
</ul>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>SRWLIB Python Example # 7:
Simulating propagation of a Gaussian X-ray beam through a simple optical scheme containing CRL
Setting-up Perfect CRL...
Optical Element Setup: CRL Focal Length: 9.4032283268808 m
done
Setting-up CRL Distorted by &quot;voids&quot; in volume (takes time)...
Optical Element Setup: CRL Focal Length: 9.4032283268808 m
done
Propagating Wavefront (through Distorted CRL and short Drift)...done
Saving resulting Intensity and Phase data to files...done
Propagating Wavefront (through Distorted CRL and Drift to waist)...done
Saving resulting Intensity and Phase data to files...done
Propagating Wavefront (through Perfect CRL and Drift to waist)...done
Saving resulting data to files...done
   Plotting the results (blocks script execution; close any graph windows to proceed) ... done
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span> <span class="c1">#Python 2.7 compatibility</span>
<span class="kn">from</span> <span class="nn">srwpy.srwlib</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">srwpy.uti_plot</span> <span class="kn">import</span> <span class="o">*</span> <span class="c1">#required for plotting</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SRWLIB Python Example # 7:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Simulating propagation of a Gaussian X-ray beam through a simple optical scheme containing CRL&#39;</span><span class="p">)</span>

<span class="c1">#**********************Input Parameters and structures:</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a> <span class="o">=</span> <span class="s1">&#39;data_example_07&#39;</span> <span class="c1">#data sub-folder name</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntOutFileName1</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_int_in.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhOutFileName1</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_ph_in.dat&#39;</span> <span class="c1">#file name for output SR phase data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName1</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_int_dist_crl_p1.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName1</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_ph_dist_crl_p1.dat&#39;</span> <span class="c1">#file name for output SR phase data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName2</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_int_dist_crl_p2.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName2</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_ph_dist_crl_p2.dat&#39;</span> <span class="c1">#file name for output SR phase data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName3</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_int_perf_crl_p2.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName3</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_ph_perf_crl_p2.dat&#39;</span> <span class="c1">#file name for output SR phase data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strOpPathOutFileName1</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_opt_path_dif_dist_crl.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strOpPathOutFileName2</span></a> <span class="o">=</span> <span class="s1">&#39;ex07_res_opt_path_dif_perf_crl.dat&#39;</span> <span class="c1">#file name for output SR intensity data</span>

<span class="n">GsnBm</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLGsnBm</span></a><span class="p">()</span> <span class="c1">#Gaussian Beam structure (just parameters)</span>
<span class="n">GsnBm</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#Transverse Coordinates of Gaussian Beam Center at Waist [m]</span>
<span class="n">GsnBm</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#Longitudinal Coordinate of Waist [m]</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">xp</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#Average Angles of Gaussian Beam at Waist [rad]</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">yp</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">avgPhotEn</span> <span class="o">=</span> <span class="mi">12400</span> <span class="c1">#5000 #Photon Energy [eV]</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">pulseEn</span> <span class="o">=</span> <span class="mf">0.001</span> <span class="c1">#Energy per Pulse [J] - to be corrected</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">repRate</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Rep. Rate [Hz] - to be corrected</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">polar</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1- linear hoirizontal</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">sigX</span> <span class="o">=</span> <span class="mf">23e-06</span><span class="o">/</span><span class="mf">2.35</span> <span class="c1">#Horiz. RMS size at Waist [m]</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">sigY</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">sigX</span> <span class="c1">#Vert. RMS size at Waist [m]</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">sigT</span> <span class="o">=</span> <span class="mf">10e-15</span> <span class="c1">#Pulse duration [s] (not used?)</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#Transverse Gauss-Hermite Mode Orders</span>
<span class="n">GsnBm</span><span class="o">.</span><span class="n">my</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">wfr</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLWfr</span></a><span class="p">()</span> <span class="c1">#Initial Electric Field Wavefront</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">allocate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1">#Numbers of points vs Photon Energy (1), Horizontal and Vertical Positions (dummy)</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">zStart</span> <span class="o">=</span> <span class="mi">300</span> <span class="c1">#Longitudinal Position [m] at which Electric Field has to be calculated, i.e. the position of the first optical element</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">eStart</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">avgPhotEn</span> <span class="c1">#Initial Photon Energy [eV]</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">eFin</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">avgPhotEn</span> <span class="c1">#Final Photon Energy [eV]</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstHorAp</span></a> <span class="o">=</span> <span class="mf">1.e-03</span> <span class="c1">#First Aperture [m]</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstVertAp</span></a> <span class="o">=</span> <span class="mf">1.e-03</span> <span class="c1">#[m]</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">xStart</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstHorAp</span></a> <span class="c1">#Initial Horizontal Position [m]</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">xFin</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstHorAp</span></a> <span class="c1">#Final Horizontal Position [m]</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">yStart</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstVertAp</span></a> <span class="c1">#Initial Vertical Position [m]</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">yFin</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">firstVertAp</span></a> <span class="c1">#Final Vertical Position [m]</span>

<span class="n">wfr</span><span class="o">.</span><span class="n">partBeam</span><span class="o">.</span><span class="n">partStatMom1</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="c1">#Some information about the source in the Wavefront structure</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">partBeam</span><span class="o">.</span><span class="n">partStatMom1</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a>
<span class="n">wfr</span><span class="o">.</span><span class="n">partBeam</span><span class="o">.</span><span class="n">partStatMom1</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">z</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">partBeam</span><span class="o">.</span><span class="n">partStatMom1</span><span class="o">.</span><span class="n">xp</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">xp</span>
<span class="n">wfr</span><span class="o">.</span><span class="n">partBeam</span><span class="o">.</span><span class="n">partStatMom1</span><span class="o">.</span><span class="n">yp</span> <span class="o">=</span> <span class="n">GsnBm</span><span class="o">.</span><span class="n">yp</span>

<a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">sampFactNxNyForProp</span></a> <span class="o">=</span> <span class="mi">5</span> <span class="c1">#sampling factor for adjusting nx, ny (effective if &gt; 0)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">arPrecPar</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">sampFactNxNyForProp</span></a><span class="p">]</span>

<span class="c1">#**********************Calculating Initial Wavefront and extracting Intensity:</span>
<span class="n">srwl</span><span class="o">.</span><span class="n">CalcElecFieldGaussian</span><span class="p">(</span><span class="n">wfr</span><span class="p">,</span> <span class="n">GsnBm</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">arPrecPar</span></a><span class="p">)</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D intensity data</span>
<span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0</span></a><span class="p">,</span> <span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntOutFileName1</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0x</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
<span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0x</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>

<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP0</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D phase data (note it should be &#39;d&#39;)</span>
<span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP0</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts radiation phase</span>
<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP0</span></a><span class="p">,</span> <span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhOutFileName1</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;rad&#39;</span><span class="p">])</span>

<span class="n">mesh0</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>

<span class="c1">#***********Optical Elements</span>

<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">delta</span></a> <span class="o">=</span> <span class="mf">2.21555115e-06</span> <span class="c1">#Be @ 12400 eV #1.3657359E-05 #Be @ 5000 eV</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">attenLen</span></a> <span class="o">=</span> <span class="mf">15453.7e-06</span> <span class="c1">#[m] #1268.65e-06</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a> <span class="o">=</span> <span class="mf">1.e-03</span> <span class="c1">#CRL diameter</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinCRL</span></a> <span class="o">=</span> <span class="mf">250e-06</span> <span class="c1">#CRL radius at the tip of parabola [m]</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">nCRL</span></a> <span class="o">=</span> <span class="mi">6</span> <span class="c1">#number of lenses</span>
<a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">wallThickCRL</span></a> <span class="o">=</span> <span class="mf">50e-06</span> <span class="c1">#CRL wall thickness [m]</span>

<span class="n">opCRLperf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#set to 1 if simulation of perfect CRL is required, otherwise set to None</span>
<span class="n">opCRLdist</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#None #set to 1 if simulation of distorted CRL is required, otherwise set to None</span>

<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLx</span></a> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLy</span></a> <span class="o">=</span> <span class="kc">None</span>
<span class="n">opMeshCRL</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1">#Generating a perfect 2D parabolic CRL:</span>
<span class="k">if</span><span class="p">(</span><span class="n">opCRLperf</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Setting-up Perfect CRL...&#39;</span><span class="p">)</span>
    <span class="n">opCRLperf</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_opt_setup_CRL</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">delta</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">attenLen</span></a><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">nCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">wallThickCRL</span></a><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
    <span class="c1">#Extracting transmission data characteristic for subsequent plotting and saving it to a file</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a> <span class="o">=</span> <span class="n">opCRLperf</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a><span class="p">,</span> <span class="n">opCRLperf</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strOpPathOutFileName2</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Opt. Path Diff.&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">])</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLx</span></a> <span class="o">=</span> <span class="n">opCRLperf</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">_y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLy</span></a> <span class="o">=</span> <span class="n">opCRLperf</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">_x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">opMeshCRL</span> <span class="o">=</span> <span class="n">opCRLperf</span><span class="o">.</span><span class="n">mesh</span>

<span class="k">if</span><span class="p">(</span><span class="n">opCRLdist</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Setting-up CRL Distorted by </span><span class="se">\&quot;</span><span class="s1">voids</span><span class="se">\&quot;</span><span class="s1"> in volume (takes time)...&#39;</span><span class="p">)</span>
    <span class="c1">#Generating array of Void Centers and Radii, and a CRL with these (spherical) Voids:</span>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">nVoidInRectPar</span></a> <span class="o">=</span> <span class="mi">100</span> <span class="c1">#1000 #parameter controlling density of voids</span>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a> <span class="o">=</span> <span class="mi">201</span> <span class="c1">#(auxiliary) numbers of points in tabulated functions to be used (in the rejection method)</span>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNy</span></a> <span class="o">=</span> <span class="mi">201</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinVoid</span></a> <span class="o">=</span> <span class="mf">2e-06</span> <span class="c1">#min. void radius</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMaxVoid</span></a> <span class="o">=</span> <span class="mf">25e-06</span> <span class="c1">#max. void radius</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmin</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmax</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="p">)</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRLe2</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">dx</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="o">/</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a>
    <span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">ix</span></a> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="p">):</span>
        <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmin</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">ix</span></a><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">sqrt</span></a><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRLe2</span></a> <span class="o">-</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a><span class="p">))</span>
        <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmax</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">ix</span></a><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmin</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">ix</span></a><span class="p">]</span>
        <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">+=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">dx</span></a>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNpSurf</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNy</span></a>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmin</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNpSurf</span></a><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmax</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNpSurf</span></a><span class="p">)</span>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">a</span></a> <span class="o">=</span> <span class="mf">0.5</span><span class="o">/</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinCRL</span></a>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">halfWallThickCRL</span></a> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">wallThickCRL</span></a>
    <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">it</span></a> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">iy</span></a> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNy</span></a><span class="p">):</span>
        <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">ye2</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a>
        <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a>
        <span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">ix</span></a> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="p">):</span>
            <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmin</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">it</span></a><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">halfWallThickCRL</span></a> <span class="o">-</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">a</span></a><span class="o">*</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">+</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">ye2</span></a><span class="p">)</span>
            <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmax</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">it</span></a><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmin</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">it</span></a><span class="p">]</span>
            <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">it</span></a> <span class="o">+=</span> <span class="mi">1</span>
            <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">x</span></a> <span class="o">+=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">dx</span></a>
        <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">y</span></a> <span class="o">+=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">dx</span></a>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arVoidCenCoordInCRL</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_rand_fill_vol</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">nVoidInRectPar</span></a><span class="p">,</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNx</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmin</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseYvsXmax</span></a><span class="p">,</span> <span class="o">-</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">baseNy</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmin</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">baseZvsXYmax</span></a><span class="p">)</span>
    <span class="c1">#Replacing longitudinal coordinate by random Radii:</span>
    <a href="https://docs.python.org/3/library/random.html#random.seed" title="View documentation for random.seed"><span class="n">random</span><span class="o">.</span><span class="n">seed</span></a><span class="p">()</span>
    <span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">i</span></a> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arVoidCenCoordInCRL</span></a><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">)):</span>
        <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arVoidCenCoordInCRL</span></a><span class="p">[</span><span class="mi">3</span><span class="o">*</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">i</span></a> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinVoid</span></a> <span class="o">+</span> <span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMaxVoid</span></a> <span class="o">-</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinVoid</span></a><span class="p">)</span><span class="o">*</span><a href="https://docs.python.org/3/library/random.html#random.random" title="View documentation for random.random"><span class="n">random</span><span class="o">.</span><span class="n">random</span></a><span class="p">()</span>
        <span class="c1">#print(&#39;Void Coord. and Rad. (x, y, r):&#39;, arVoidCenCoordInCRL[3*i], arVoidCenCoordInCRL[3*i + 1], arVoidCenCoordInCRL[3*i + 2])</span>
    <span class="c1">#Generating distorted CRL, with voids</span>
    <span class="n">opCRLdist</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_opt_setup_CRL</span></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">delta</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">attenLen</span></a><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">rMinCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">nCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">wallThickCRL</span></a><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arVoidCenCoordInCRL</span></a><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
    <span class="c1">#Extracting transmission data characteristic for subsequent plotting and saving it to a file</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a> <span class="o">=</span> <span class="n">opCRLdist</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a><span class="p">,</span> <span class="n">opCRLdist</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strOpPathOutFileName1</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Opt. Path Diff.&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">])</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLx</span></a> <span class="o">=</span> <span class="n">opCRLdist</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">_y</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLy</span></a> <span class="o">=</span> <span class="n">opCRLdist</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">_x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">opMeshCRL</span> <span class="o">=</span> <span class="n">opCRLdist</span><span class="o">.</span><span class="n">mesh</span>

<span class="n">opApCRL</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptA</span></a><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#float" title="View documentation for builtins.float"><span class="n">diamCRL</span></a><span class="p">)</span> <span class="c1">#Aperture at CRL</span>

<span class="n">opDrCRL_CDI</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptD</span></a><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="c1">#Drift space from CRL to a plane where a CDI image of imperfections could be observed</span>
<span class="n">opDrCRL_Waist</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptD</span></a><span class="p">(</span><span class="mf">9.7075</span><span class="p">)</span> <span class="c1">#Drift space from CRL to Waist (for 12.4 keV)</span>
<span class="c1">#opDrCRL_Waist = SRWLOptD(1.53323) #Drift space from CRL to Waist (for 5 keV)</span>

<span class="c1">#***********Wavefront Propagation Parameters:</span>
<span class="c1">#[0]: Auto-Resize (1) or not (0) Before propagation</span>
<span class="c1">#[1]: Auto-Resize (1) or not (0) After propagation</span>
<span class="c1">#[2]: Relative Precision for propagation with Auto-Resizing (1. is nominal)</span>
<span class="c1">#[3]: Allow (1) or not (0) for semi-analytical treatment of the quadratic (leading) phase terms at the propagation</span>
<span class="c1">#[4]: Do any Resizing on Fourier side, using FFT, (1) or not (0)</span>
<span class="c1">#[5]: Horizontal Range modification factor at Resizing (1. means no modification)</span>
<span class="c1">#[6]: Horizontal Resolution modification factor at Resizing</span>
<span class="c1">#[7]: Vertical Range modification factor at Resizing</span>
<span class="c1">#[8]: Vertical Resolution modification factor at Resizing</span>
<span class="c1">#[9]: Type of wavefront Shift before Resizing (not yet implemented)</span>
<span class="c1">#[10]: New Horizontal wavefront Center position after Shift (not yet implemented)</span>
<span class="c1">#[11]: New Vertical wavefront Center position after Shift (not yet implemented)</span>
<span class="c1">#prParRes1 = [0, 0, 1., 1, 0, 1.1, 8., 1.1, 8., 0, 0, 0]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes1</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">#&quot;Beamline&quot; - Container of Optical Elements (together with the corresponding wavefront propagation instructions)</span>
<span class="n">optBLperf</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptC</span></a><span class="p">([</span><span class="n">opApCRL</span><span class="p">,</span> <span class="n">opCRLperf</span><span class="p">,</span> <span class="n">opDrCRL_Waist</span><span class="p">],</span>
                     <span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes1</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">])</span>
<span class="n">optBLdist</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptC</span></a><span class="p">([</span><span class="n">opApCRL</span><span class="p">,</span> <span class="n">opCRLdist</span><span class="p">,</span> <span class="n">opDrCRL_Waist</span><span class="p">],</span>
                     <span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes1</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">])</span>
<span class="n">optBLdistCDI</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">SRWLOptC</span></a><span class="p">([</span><span class="n">opApCRL</span><span class="p">,</span> <span class="n">opCRLdist</span><span class="p">,</span> <span class="n">opDrCRL_CDI</span><span class="p">],</span>
                     <span class="p">[</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes1</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">prParRes0</span></a><span class="p">])</span>
<span class="c1">#sys.exit(0)</span>

<span class="c1">#***********Wavefront Propagation</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1x</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1y</span></a> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a> <span class="o">=</span> <span class="kc">None</span>
<span class="n">mesh1</span> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2x</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2y</span></a> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a> <span class="o">=</span> <span class="kc">None</span>
<span class="n">mesh2</span> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3x</span></a> <span class="o">=</span> <span class="kc">None</span><span class="p">;</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3y</span></a> <span class="o">=</span> <span class="kc">None</span>
<a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a> <span class="o">=</span> <span class="kc">None</span>
<span class="n">mesh3</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">if</span><span class="p">(</span><span class="n">opCRLdist</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="c1">#Duplicating wavefront (by re-creating all objects/arrays):</span>
    <span class="n">wfr1</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/copy.html#copy.deepcopy" title="View documentation for copy.deepcopy"><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr</span><span class="p">)</span>
    <span class="n">wfr2</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/copy.html#copy.deepcopy" title="View documentation for copy.deepcopy"><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Propagating Wavefront (through Distorted CRL and short Drift)...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">PropagElecField</span><span class="p">(</span><span class="n">wfr1</span><span class="p">,</span> <span class="n">optBLdistCDI</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving resulting Intensity and Phase data to files...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">mesh1</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr1</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a><span class="p">,</span> <span class="n">wfr1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a><span class="p">,</span> <span class="n">mesh1</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName1</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1x</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1x</span></a><span class="p">,</span> <span class="n">wfr1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1y</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1y</span></a><span class="p">,</span> <span class="n">wfr1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D phase data (note it should be &#39;d&#39;)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a><span class="p">,</span> <span class="n">wfr1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts radiation phase</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a><span class="p">,</span> <span class="n">mesh1</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName1</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;rad&#39;</span><span class="p">])</span>
    <span class="k">del</span> <span class="n">wfr1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Propagating Wavefront (through Distorted CRL and Drift to waist)...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">PropagElecField</span><span class="p">(</span><span class="n">wfr2</span><span class="p">,</span> <span class="n">optBLdist</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving resulting Intensity and Phase data to files...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">mesh2</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr2</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a><span class="p">,</span> <span class="n">wfr2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a><span class="p">,</span> <span class="n">mesh2</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName2</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2x</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2x</span></a><span class="p">,</span> <span class="n">wfr2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2y</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2y</span></a><span class="p">,</span> <span class="n">wfr2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D phase data (note it should be &#39;d&#39;)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a><span class="p">,</span> <span class="n">wfr2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts radiation phase</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a><span class="p">,</span> <span class="n">mesh2</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName2</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;rad&#39;</span><span class="p">])</span>
    <span class="k">del</span> <span class="n">wfr2</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>

<span class="k">if</span><span class="p">(</span><span class="n">opCRLperf</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Propagating Wavefront (through Perfect CRL and Drift to waist)...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">PropagElecField</span><span class="p">(</span><span class="n">wfr</span><span class="p">,</span> <span class="n">optBLperf</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving resulting data to files...&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">mesh3</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">deepcopy</span></a><span class="p">(</span><span class="n">wfr</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a><span class="p">,</span> <span class="n">mesh3</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strIntPropOutFileName3</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3x</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3x</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3y</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#array to take 1D intensity data</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3y</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts intensity</span>
    <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">array</span></a><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">nx</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">ny</span><span class="p">)</span> <span class="c1">#&quot;flat&quot; array to take 2D phase data (note it should be &#39;d&#39;)</span>
    <span class="n">srwl</span><span class="o">.</span><span class="n">CalcIntFromElecField</span><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a><span class="p">,</span> <span class="n">wfr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">eStart</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#extracts radiation phase</span>
    <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">srwl_uti_save_intens_ascii</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a><span class="p">,</span> <span class="n">mesh3</span><span class="p">,</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="View documentation for os.path.join"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="View documentation for os.getcwd"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strDataFolderName</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">strPhPropOutFileName3</span></a><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Horizontal Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase&#39;</span><span class="p">],</span> <span class="n">_arUnits</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;rad&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>

<span class="c1">#**********************Plotting results (requires 3rd party graphics package)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   Plotting the results (blocks script execution; close any graph windows to proceed) ... &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0x</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="o">*</span><span class="n">mesh0</span><span class="o">.</span><span class="n">xStart</span><span class="p">,</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mesh0</span><span class="o">.</span><span class="n">xFin</span><span class="p">,</span> <span class="n">mesh0</span><span class="o">.</span><span class="n">nx</span><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0y</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="o">*</span><span class="n">mesh0</span><span class="o">.</span><span class="n">yStart</span><span class="p">,</span> <span class="mi">1000</span><span class="o">*</span><span class="n">mesh0</span><span class="o">.</span><span class="n">yFin</span><span class="p">,</span> <span class="n">mesh0</span><span class="o">.</span><span class="n">ny</span><span class="p">]</span>
<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity Before Propagation&#39;</span><span class="p">])</span>
<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI0x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0x</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity Before Propagation</span><span class="se">\n</span><span class="s1">(cut vs horizontal position at y = 0)&#39;</span><span class="p">])</span>
<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP0</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh0y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase Before Propagation&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="n">opMeshCRL</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLx</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="o">*</span><span class="n">opMeshCRL</span><span class="o">.</span><span class="n">xStart</span><span class="p">,</span> <span class="mi">1000</span><span class="o">*</span><span class="n">opMeshCRL</span><span class="o">.</span><span class="n">xFin</span><span class="p">,</span> <span class="n">opMeshCRL</span><span class="o">.</span><span class="n">nx</span><span class="p">]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLy</span></a> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="o">*</span><span class="n">opMeshCRL</span><span class="o">.</span><span class="n">yStart</span><span class="p">,</span> <span class="mi">1000</span><span class="o">*</span><span class="n">opMeshCRL</span><span class="o">.</span><span class="n">yFin</span><span class="p">,</span> <span class="n">opMeshCRL</span><span class="o">.</span><span class="n">ny</span><span class="p">]</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRL</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLx</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLy</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;CRL Optical Path Difference&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLx</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLx</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLx</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Optical Path Diff. [m]&#39;</span><span class="p">,</span> <span class="s1">&#39;CRL Optical Path Difference</span><span class="se">\n</span><span class="s1">(cut vs horizontal position at y = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLy</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">opPathDifCRLy</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMeshCRLy</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Vertical Position [mm]&#39;</span><span class="p">,</span> <span class="s1">&#39;Optical Path Diff. [m]&#39;</span><span class="p">,</span> <span class="s1">&#39;CRL Optical Path Difference</span><span class="se">\n</span><span class="s1">(cut vs vertical position at x = 0)&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="n">mesh1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1x</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">xStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">xFin</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">nx</span><span class="p">]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1y</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">yStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh1</span><span class="o">.</span><span class="n">yFin</span><span class="p">,</span> <span class="n">mesh1</span><span class="o">.</span><span class="n">ny</span><span class="p">]</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1x</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1x</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation</span><span class="se">\n</span><span class="s1">(horizontal cut at y = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1y</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI1y</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation</span><span class="se">\n</span><span class="s1">(vertical cut at x = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP1</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh1y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase After Propagation&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="n">mesh2</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2x</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">xStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">xFin</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">nx</span><span class="p">]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2y</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">yStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh2</span><span class="o">.</span><span class="n">yFin</span><span class="p">,</span> <span class="n">mesh2</span><span class="o">.</span><span class="n">ny</span><span class="p">]</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2x</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2x</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist</span><span class="se">\n</span><span class="s1">(horizontal cut at y = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2y</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI2y</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist</span><span class="se">\n</span><span class="s1">(vertical cut at x = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP2</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh2y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase After Propagation to Waist&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="n">mesh3</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3x</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">xStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">xFin</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">nx</span><span class="p">]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3y</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">yStart</span><span class="p">,</span> <span class="mf">1e+06</span><span class="o">*</span><span class="n">mesh3</span><span class="o">.</span><span class="n">yFin</span><span class="p">,</span> <span class="n">mesh3</span><span class="o">.</span><span class="n">ny</span><span class="p">]</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3x</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3x</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist</span><span class="se">\n</span><span class="s1">(horizontal cut at y = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3y</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot1d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arI3y</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity [a.u.]&#39;</span><span class="p">,</span> <span class="s1">&#39;Intensity After Propagation to Waist</span><span class="se">\n</span><span class="s1">(vertical cut at x = 0)&#39;</span><span class="p">])</span>
    <span class="k">if</span> <a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot2d</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/array.html#array.array" title="View documentation for array.array"><span class="n">arP3</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3x</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">plotMesh3y</span></a><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Horizontal Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Vertical Position [microns]&#39;</span><span class="p">,</span> <span class="s1">&#39;Phase After Propagation to Waist&#39;</span><span class="p">])</span>

<a href="https://docs.python.org/3/library/functions.html#object" title="View documentation for builtins.object"><span class="n">uti_plot_show</span></a><span class="p">()</span> <span class="c1">#show all graphs (blocks script execution; close all graph windows to proceed)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 1 minutes  26.688 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-cookbook-srwlib-example07-py">
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/60d145782c02570e810e1b703420a03d/SRWLIB_Example07.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">SRWLIB_Example07.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/1a6ee74077cae4a1b130f3d4d1290935/SRWLIB_Example07.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">SRWLIB_Example07.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SRWLIB_Example09.html" class="btn btn-neutral float-right" title="SRW Example #9" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SRWLIB_Example06.html" class="btn btn-neutral float-left" title="SRW Example #6" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Synchrotron Radiation Workshop, NSLS-II, Brookhaven National Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>